<!DOCTYPE html>
<html>

<head>

	<link href="css/blackboard.css" rel="stylesheet"/>
	<link href="css/app.css" rel="stylesheet"/>
	<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>

</head>

<body>
	<header>
		<h1>Backbone.CollectionView</h1>
	</header>
	<div class="content">
		<ul id="example-navigation" class="nav"></ul>
		<div class="example-wrapper">

		<div class="example-container">
			<p class="intro-text">A backbone view class that renders a collection of models. This class is similar to the collection view classes found in Backbone.Marionette and other frameworks, with added features for automatic selection of models in response to clicks, and support for rearranging models (and reordering the underlying collection) through drag and drop.</p>
			<button class="button-big button-orange">Download Minified Source</button>
			<button class="button-big button-blue">Download Commented Source</button>
		</div>


		<div class="example-container">
			<h2>Single Selection</h2>
			<div class="demo-container">
				<p>Try clicking on a row, the background of the selected row will change.  There is now way to select multiple rows.</p>
				<ul id="demoSingleSelectionList" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript">var singleSelectionView = new Backbone.CollectionView({
  el : $('#demoSingleSelectionList'),
  selectable : true,
  collection : createACollection(),
  modelView : EmployeeView
});</code>
</pre>
		</div>


		<div class="example-container">
			<h2>Multiple Selection</h2>
			<div class="demo-container">
				<p>Select a row.  Then hold down command or shift and click on another row.  Multiple rows are selected.  If you held down shift, all the rows in between are selected.  Using command, only the two rows you clicked on are selected.</p>
				<ul id="demoMultipleSelectionList" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript">var multipleSelectionView = new Backbone.CollectionView({
  el : $('#demoMultipleSelectionList'),
  selectable : true,
  selectMultiple : true,
  collection : createACollection(),
  modelView : EmployeeView
});</code>
</pre>
		</div>


		<div class="example-container">
			<h2>Using arrow keys to change selection</h2>
			<div class="demo-container">
				<p>Select a row.  Try using the up and down arrow keys.  The selected row will change.</p>
				<ul id="demoUpDownArrowSelection" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript">var arrowSelectionView = new Backbone.CollectionView({
  el : $('#demoUpDownArrowSelection'),
  selectable : true,
  collection : createACollection(),
  modelView : EmployeeView
});</code>
</pre>
		</div>


		<div class="example-container">
			<h2>Sorting</h2>
			<div class="demo-container">
				<p>Click on a row and drag it to another location in the list.  The list re-arranges itself.  Click on the button below to see the contents of the backing collection.  You will see that that has been rearranged as well.</p>
				<button id="showModelSorting" class="button-small button-blue">See the collection contents</button>
				<ul id="demoSortable" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript"> var sortableView = new Backbone.CollectionView({
  el : $('#demoSortable'),
  selectable : true,
  sortable : true,
  collection : createACollection(),
  modelView : EmployeeView
});</code>
</pre>
		</div>


		<div class="example-container">
			<h2>Adding and Removing items from the List</h2>
			<div class="demo-container">
				<p>Click on the buttons below to either add an item to the end of the collection, or remove the currently selected item.  The collection is automatically re-rendered for you.</p>
				<button id="demoAddToCollectionButton" class="button-small button-green">Add item</button>
				<button id="demoRemoveFromCollectionButton" class="button-small button-right button-red">Remove selected item</button>
				<ul id="demoAddAndRemoveFromList" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript"> $('#demoRemoveFromCollectionButton').click(function() {

  var curSelectedModel = addRemoveItemView.getSelectedItem({
    by : "model"
  });

  if (curSelectedModel) {
    addRemoveItemView.collection.remove(curSelectedModel);
  }
});

$('#demoAddToCollectionButton').click(function() {
  addRemoveItemView.collection.add({
    firstName : 'Super',lastName : 'Sleuth'
  });
});</code>
</pre>
		</div>

		<div class="example-container">
			<h2>Selected Event</h2>
			<div class="demo-container">
				<p>Try selecting an element.  A popup will inform you of which item is the newly selected one and which one (if any was previously selected).</p>
				<ul id="demoSelectedEvent" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript">selectedEventView.on("selectionChanged", function(
  newSelectedItems,
  oldSelectedItems
) {

  if (newSelectedItems.length === 1) {
    var newSelectedModel = this.viewManager.findByModel(
      this.collection.get( newSelectedItems[0] )
    ).model;
    alert('The newly selected model: ' +
          newSelectedModel.get('firstName') + ' ' +
          newSelectedModel.get('lastName'));
  }
  else {
    alert('All items were unselected.');
  }
});</code>
</pre>
		</div>

		<div class="example-container">
			<h2>Filtering which models are selectable</h2>
			<div class="demo-container">
				<p>A function specifying that only models with a last name of 'Holmes' can be selectable was passed to the CollectionView.  John Watson is not selectable.</p>
				<ul id="demoSelectableFilter" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript">var selectableFilterView = new Backbone.CollectionView({
  el : $('#demoSelectableFilter'),
  selectable : true,
  collection : createACollection(),
  modelView : EmployeeView,
  selectableModelsFilter : function(model) {
    return model.get('lastName') === 'Holmes';
  }
});</code>
</pre>
		</div>

		<div class="example-container">
			<h2>Filtering which models are sortable</h2>
			<div class="demo-container">
				<p>A function specifying that only models with a last name of 'Holmes' can be sorted (dragged and dropped) was passed to the CollectionView.  John Watson is not sortable.</p>
				<ul id="demoSortableFilter" class="example-list"></ul>
			</div>
			<pre>
<code data-language="javascript"> var sortableFilterView = new Backbone.CollectionView({
  el : $('#demoSortableFilter'),
  selectable : true,
  sortable : true,
  collection : createACollection(),
  modelView : EmployeeView,
  sortableModelsFilter : function(model) {
    return model.get('lastName') === 'Holmes';
  }
});</code>
</pre>
		</div>
	</div>

		<!--Underscore template for an employee view.  Used in a collection view rendered as a list.-->
		<script type="text/html" id="example-template">
		<%= example %>
		</script>

		<!--Underscore template for an employee view.  Used in a collection view rendered as a list.-->
		<script type="text/html" id="employee-template">
		Full name: <%= firstName %> <%= lastName %>
		</script>

		<script type="text/javascript" src="lib/jquery-1.9.1.js"></script>
		<script type="text/javascript" src="lib/jquery-ui.js"></script>
		<script type="text/javascript" src="lib/underscore.js"></script>
		<script type="text/javascript" src="lib/backbone.js"></script>
		<script type="text/javascript" src="lib/backbone.babysitter.js"></script>
		<script type="text/javascript" src="lib/backbone.courier.js"></script>
		<script type="text/javascript" src="lib/collectionView.js"></script>
		<script type="text/javascript" src="lib/rainbow-custom.min.js"></script>
		<script type="text/javascript" src="js/app.js"></script>
</body>

</html>
